<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>final List</title>
    <link rel="stylesheet" href="bootstrap.css">
    <link rel="stylesheets" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.3.1/css/bootstrap.min.css"/>
</head>

<body>
    <nav class="navbar bg-primary" data-bs-theme="dark">
        <a class="navbar-brand ps-4 fs-2" style="font-family: Verdana, Geneva, Tahoma, sans-serif;">College Guide</a>
    </nav>
    <div id="text_area">
    <div class="container w-75 col-md-5 col-sm-6 border border-secondary mt-5"
        style=" overflow-y: scroll;" id="clgs">
        <table class="table" id="table">
            <thead>
                <tr>
                    <th scope="col">College Name</th>
                    <th scope="col">Code</th>
                    <th scope="col">Location</th>
                    <th scope="col">Branch</th>
                    <th scope="col">Close Rank</th>
                </tr>
            </thead>
            <tbody id="tbody">

            </tbody>
        </table>
    </div>
</div>
    <div class=" w-75 mx-auto">
        <button type="button" class="btn btn-secondary mt-3 mb-4" style="width: 200px;" onclick="back()">Back</button>
        <button href="" type="button" class="btn btn-primary mt-3 mb-4" style="width: 200px;" onclick="generatepdf()">Print</button>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.9.2/html2pdf.bundle.min.js"></script>
       
        
    </div>
    <script>
        function back() {
            window.history.back();
        }
        var final_list = sessionStorage.getItem('final_list');
        var tbody = document.getElementById('tbody');
        var div = document.createElement('div');
        div.innerHTML = final_list;
        if(div.firstElementChild.tagName == 'DIV')
        {
            tbody.innerHTML = ` <tr><td colspan="5"><div class="alert alert-danger" role="alert">
    <h4 class="alert-heading">Oops!</h4>
    <p>Looks like you have forgot to save you colleges list or you have not added any colleges to you list, please go back and add colleges to your list and dont forget to save before you proceed.</p>
    <hr>
    <p class="mb-0">Sorry for the inconvinience, we are working on auto save feature, Soon we will update the website.</p>
  </div></td></tr> `;
        }
        else{
            tbody.innerHTML = final_list;
        var but = tbody.getElementsByTagName('tr');
        for (let i = 0; i < but.length; i++) {
            var remove_button = but[i].lastElementChild;
            but[i].removeChild(remove_button);

        }
        for (let i = 0; i < but.length; i++) {
            if(tbody.firstElementChild){
            var clg_name = but[i].getElementsByTagName('th')[0].firstElementChild;
            var name_th = document.createElement('th');
            name_th.textContent = clg_name.title;
        
            but[i].prepend(name_th);
            but[i].getElementsByTagName('th')[0].style.fontWeight = 500;
            but[i].getElementsByTagName('th')[1].style.fontWeight = 400;}
        }
    }
    </script>
    <script type="module" src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.esm.js"></script>
    <script nomodule src="https://unpkg.com/ionicons@7.1.0/dist/ionicons/ionicons.js"></script>

</body>

    <script>
        function generatepdf()
        {
            const element = document.getElementById('text_area');
            html2pdf(element);
        }
    </script>

</html>

